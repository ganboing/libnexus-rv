<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libnexus-rv: include/libnexus-rv/trace-decoder.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libnexus-rv
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_cd2e8cd127ba1f82cd00315a0f3636c1.html">libnexus-rv</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">trace-decoder.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Trace decoder usage model, events, and common error codes.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="msg-decoder_8h_source.html">msg-decoder.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="hist-array_8h_source.html">hist-array.h</a>&quot;</code><br />
<code>#include &quot;return-stack.h&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for trace-decoder.h:</div>
<div class="dyncontent">
<div class="center"><img src="trace-decoder_8h__incl.png" border="0" usemap="#ainclude_2libnexus-rv_2trace-decoder_8h" alt=""/></div>
<map name="ainclude_2libnexus-rv_2trace-decoder_8h" id="ainclude_2libnexus-rv_2trace-decoder_8h">
<area shape="rect" title="Trace decoder usage model, events, and common error codes." alt="" coords="462,5,609,47"/>
<area shape="rect" href="msg-decoder_8h.html" title=" " alt="" coords="196,95,315,121"/>
<area shape="rect" href="hist-array_8h.html" title=" " alt="" coords="488,169,583,196"/>
<area shape="rect" href="return-stack_8h_source.html" title=" " alt="" coords="605,95,719,121"/>
<area shape="rect" href="msg-types_8h.html" title=" " alt="" coords="24,169,127,196"/>
<area shape="rect" title=" " alt="" coords="218,244,293,271"/>
<area shape="rect" title=" " alt="" coords="34,244,117,271"/>
<area shape="rect" title=" " alt="" coords="151,169,218,196"/>
<area shape="rect" title=" " alt="" coords="293,169,364,196"/>
<area shape="rect" title=" " alt="" coords="389,169,463,196"/>
<area shape="rect" title=" " alt="" coords="500,244,571,271"/>
<area shape="rect" title=" " alt="" coords="658,169,733,196"/>
<area shape="rect" title=" " alt="" coords="757,169,828,196"/>
</map>
</div>
</div>
<p><a href="trace-decoder_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnexusrv__trace__indirect.html">nexusrv_trace_indirect</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace Indirect Branch Event.  <a href="structnexusrv__trace__indirect.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnexusrv__trace__sync.html">nexusrv_trace_sync</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace Sync Event.  <a href="structnexusrv__trace__sync.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnexusrv__trace__error.html">nexusrv_trace_error</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace Error Event.  <a href="structnexusrv__trace__error.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnexusrv__trace__stop.html">nexusrv_trace_stop</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Stop Event.  <a href="structnexusrv__trace__stop.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace decoder context.  <a href="structnexusrv__trace__decoder.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:aefb4fd68cba5529e582a9af3f4d0f8dd"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structnexusrv__trace__indirect.html">nexusrv_trace_indirect</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#aefb4fd68cba5529e582a9af3f4d0f8dd">nexusrv_trace_indirect</a></td></tr>
<tr class="memdesc:aefb4fd68cba5529e582a9af3f4d0f8dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace Indirect Branch Event.  <a href="trace-decoder_8h.html#aefb4fd68cba5529e582a9af3f4d0f8dd">More...</a><br /></td></tr>
<tr class="separator:aefb4fd68cba5529e582a9af3f4d0f8dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a94ea2df95556d754a6889a2254548d6f"><td class="memItemLeft" align="right" valign="top"><a id="a94ea2df95556d754a6889a2254548d6f"></a>
typedef struct <a class="el" href="structnexusrv__trace__sync.html">nexusrv_trace_sync</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#a94ea2df95556d754a6889a2254548d6f">nexusrv_trace_sync</a></td></tr>
<tr class="memdesc:a94ea2df95556d754a6889a2254548d6f"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace Sync Event. <br /></td></tr>
<tr class="separator:a94ea2df95556d754a6889a2254548d6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac5b3019a636b6b1e3bd5357c7e8d6e92"><td class="memItemLeft" align="right" valign="top"><a id="ac5b3019a636b6b1e3bd5357c7e8d6e92"></a>
typedef struct <a class="el" href="structnexusrv__trace__error.html">nexusrv_trace_error</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#ac5b3019a636b6b1e3bd5357c7e8d6e92">nexusrv_trace_error</a></td></tr>
<tr class="memdesc:ac5b3019a636b6b1e3bd5357c7e8d6e92"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace Error Event. <br /></td></tr>
<tr class="separator:ac5b3019a636b6b1e3bd5357c7e8d6e92"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2f37ee248b1b1b7d88f2ee2e0b29e66"><td class="memItemLeft" align="right" valign="top"><a id="ae2f37ee248b1b1b7d88f2ee2e0b29e66"></a>
typedef struct <a class="el" href="structnexusrv__trace__stop.html">nexusrv_trace_stop</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#ae2f37ee248b1b1b7d88f2ee2e0b29e66">nexusrv_trace_stop</a></td></tr>
<tr class="memdesc:ae2f37ee248b1b1b7d88f2ee2e0b29e66"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Stop Event. <br /></td></tr>
<tr class="separator:ae2f37ee248b1b1b7d88f2ee2e0b29e66"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada8ef96e9f39f946e2a9e144fc769e5c"><td class="memItemLeft" align="right" valign="top">typedef struct <a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#ada8ef96e9f39f946e2a9e144fc769e5c">nexusrv_trace_decoder</a></td></tr>
<tr class="memdesc:ada8ef96e9f39f946e2a9e144fc769e5c"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV Trace decoder context.  <a href="trace-decoder_8h.html#ada8ef96e9f39f946e2a9e144fc769e5c">More...</a><br /></td></tr>
<tr class="separator:ada8ef96e9f39f946e2a9e144fc769e5c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr class="memitem:aae86bf94eb587e48be2011b138c07f7b"><td class="memItemLeft" align="right" valign="top"><a id="aae86bf94eb587e48be2011b138c07f7b"></a>enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#aae86bf94eb587e48be2011b138c07f7b">nexusrv_trace_events</a> { <br />
&#160;&#160;<b>NEXUSRV_Trace_Event_None</b>
, <b>NEXUSRV_Trace_Event_Direct</b>
, <b>NEXUSRV_Trace_Event_DirectSync</b>
, <b>NEXUSRV_Trace_Event_Trap</b>
, <br />
&#160;&#160;<b>NEXUSRV_Trace_Event_Indirect</b>
, <b>NEXUSRV_Trace_Event_IndirectSync</b>
, <b>NEXUSRV_Trace_Event_Sync</b>
, <b>NEXUSRV_Trace_Event_Stop</b>
, <br />
&#160;&#160;<b>NEXUSRV_Trace_Event_Error</b>
<br />
 }</td></tr>
<tr class="memdesc:aae86bf94eb587e48be2011b138c07f7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">NexusRV trace events. <br /></td></tr>
<tr class="separator:aae86bf94eb587e48be2011b138c07f7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a15d1c90578e24316e8b5cea572c54801"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#a15d1c90578e24316e8b5cea572c54801">nexusrv_trace_decoder_init</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, <a class="el" href="structnexusrv__msg__decoder.html">nexusrv_msg_decoder</a> *msg_decoder)</td></tr>
<tr class="memdesc:a15d1c90578e24316e8b5cea572c54801"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the trace decoder.  <a href="trace-decoder_8h.html#a15d1c90578e24316e8b5cea572c54801">More...</a><br /></td></tr>
<tr class="separator:a15d1c90578e24316e8b5cea572c54801"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abf2d47e275b0b04613cd92dc8bb62774"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#abf2d47e275b0b04613cd92dc8bb62774">nexusrv_trace_decoder_fini</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder)</td></tr>
<tr class="memdesc:abf2d47e275b0b04613cd92dc8bb62774"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finialize the trace decoder.  <a href="trace-decoder_8h.html#abf2d47e275b0b04613cd92dc8bb62774">More...</a><br /></td></tr>
<tr class="separator:abf2d47e275b0b04613cd92dc8bb62774"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2320f87b2ee7bb0cbe9b34fa3df7c9ba"><td class="memItemLeft" align="right" valign="top">int32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#a2320f87b2ee7bb0cbe9b34fa3df7c9ba">nexusrv_trace_try_retire</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, uint32_t icnt, unsigned *event)</td></tr>
<tr class="memdesc:a2320f87b2ee7bb0cbe9b34fa3df7c9ba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to retire <code>icnt</code> from trace.  <a href="trace-decoder_8h.html#a2320f87b2ee7bb0cbe9b34fa3df7c9ba">More...</a><br /></td></tr>
<tr class="separator:a2320f87b2ee7bb0cbe9b34fa3df7c9ba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a91ff25c95a5bd3f68185258d447e603c"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#a91ff25c95a5bd3f68185258d447e603c">nexusrv_trace_sync_reset</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, <a class="el" href="structnexusrv__trace__sync.html">nexusrv_trace_sync</a> *sync)</td></tr>
<tr class="memdesc:a91ff25c95a5bd3f68185258d447e603c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Synchronize the trace decoder.  <a href="trace-decoder_8h.html#a91ff25c95a5bd3f68185258d447e603c">More...</a><br /></td></tr>
<tr class="separator:a91ff25c95a5bd3f68185258d447e603c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a363e1ddacad3ec47ec9c3370369a3d77"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#a363e1ddacad3ec47ec9c3370369a3d77">nexusrv_trace_next_tnt</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder)</td></tr>
<tr class="memdesc:a363e1ddacad3ec47ec9c3370369a3d77"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next taken-not-taken.  <a href="trace-decoder_8h.html#a363e1ddacad3ec47ec9c3370369a3d77">More...</a><br /></td></tr>
<tr class="separator:a363e1ddacad3ec47ec9c3370369a3d77"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4f0e0c2e26078dff6f8145d5e239482d"><td class="memItemLeft" align="right" valign="top"><a id="a4f0e0c2e26078dff6f8145d5e239482d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>nexusrv_trace_push_call</b> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, uint64_t callsite)</td></tr>
<tr class="separator:a4f0e0c2e26078dff6f8145d5e239482d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac501c27020474449089df1329b3867fa"><td class="memItemLeft" align="right" valign="top"><a id="ac501c27020474449089df1329b3867fa"></a>
int&#160;</td><td class="memItemRight" valign="bottom"><b>nexusrv_trace_pop_ret</b> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, uint64_t *callsite)</td></tr>
<tr class="separator:ac501c27020474449089df1329b3867fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac1bbd270cab415e5020fb2137628f6f8"><td class="memItemLeft" align="right" valign="top"><a id="ac1bbd270cab415e5020fb2137628f6f8"></a>
unsigned&#160;</td><td class="memItemRight" valign="bottom"><b>nexusrv_trace_callstack_used</b> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder)</td></tr>
<tr class="separator:ac1bbd270cab415e5020fb2137628f6f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4a7187c839bc77d28338d1c329334c6"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#af4a7187c839bc77d28338d1c329334c6">nexusrv_trace_next_indirect</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, <a class="el" href="structnexusrv__trace__indirect.html">nexusrv_trace_indirect</a> *indirect)</td></tr>
<tr class="memdesc:af4a7187c839bc77d28338d1c329334c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next indirect branch.  <a href="trace-decoder_8h.html#af4a7187c839bc77d28338d1c329334c6">More...</a><br /></td></tr>
<tr class="separator:af4a7187c839bc77d28338d1c329334c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afe49d5539add2735269dd787dc198a18"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#afe49d5539add2735269dd787dc198a18">nexusrv_trace_next_sync</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, <a class="el" href="structnexusrv__trace__sync.html">nexusrv_trace_sync</a> *sync)</td></tr>
<tr class="memdesc:afe49d5539add2735269dd787dc198a18"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next Sync event.  <a href="trace-decoder_8h.html#afe49d5539add2735269dd787dc198a18">More...</a><br /></td></tr>
<tr class="separator:afe49d5539add2735269dd787dc198a18"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:add5f97ac61a66e2a58dd401b23489b78"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#add5f97ac61a66e2a58dd401b23489b78">nexusrv_trace_next_error</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, <a class="el" href="structnexusrv__trace__error.html">nexusrv_trace_error</a> *error)</td></tr>
<tr class="memdesc:add5f97ac61a66e2a58dd401b23489b78"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next Error event.  <a href="trace-decoder_8h.html#add5f97ac61a66e2a58dd401b23489b78">More...</a><br /></td></tr>
<tr class="separator:add5f97ac61a66e2a58dd401b23489b78"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad88f183d8c8f6359b150bf6a2f31271f"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="trace-decoder_8h.html#ad88f183d8c8f6359b150bf6a2f31271f">nexusrv_trace_next_stop</a> (<a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *decoder, <a class="el" href="structnexusrv__trace__stop.html">nexusrv_trace_stop</a> *stop)</td></tr>
<tr class="memdesc:ad88f183d8c8f6359b150bf6a2f31271f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the next Stop event.  <a href="trace-decoder_8h.html#ad88f183d8c8f6359b150bf6a2f31271f">More...</a><br /></td></tr>
<tr class="separator:ad88f183d8c8f6359b150bf6a2f31271f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Trace decoder usage model, events, and common error codes. </p>
<p>The main function is nexusrv_trace_try_retire. The user of the trace decoder is expected to be calling this function a lot. Assuming we are currently synchronized to a code block (a sequence of instructions without branch in between). The caller can try to retire the whole block by calling it, and see how many instructions can be successfully retired before hitting a <em>event</em>. This allows the caller to determine if there's any interrupt/exception occurred in the middle of the block, and if the Direct/Indirect branch or other expected event is pending at the end of the block. The events can then be consumed by calling the corresponding nexusrv_trace_next_x function.</p><ul>
<li><b>NEXUSRV_Trace_Event_None:</b> In BTM mode, no event pending. In HTM mode, a TNT might be pending. Use nexusrv_trace_next_tnt to retrieve it</li>
<li><b>NEXUSRV_Trace_Event_Direct:</b> A direct branch is pending. Use nexusrv_trace_next_tnt to retrieve it</li>
<li><b>NEXUSRV_Trace_Event_DirectSync:</b> A direct branch+sync is pending. Use nexusrv_trace_next_tnt to retrieve the direct branch, or Use nexusrv_trace_next_sync to retrieve the sync. Note: use nexusrv_trace_next_sync will discard the direct branch.</li>
<li><b>NEXUSRV_Trace_Event_Indirect:</b> An indirect branch is pending Use nexusrv_trace_next_indirect to retrieve it</li>
<li><b>NEXUSRV_Trace_Event_IndirectSync:</b> An indirect branch+sync is pending Use nexusrv_trace_next_indirect to retrieve the indirect branch, or Use nexusrv_trace_next_sync to retrieve the sync. Note: use nexusrv_trace_next_sync will discard the indirect branch.</li>
<li><b>NEXUSRV_Trace_Event_Sync:</b> Use nexusrv_trace_next_sync to retrieve it</li>
<li><b>NEXUSRV_Trace_Event_Stop:</b> Use nexusrv_trace_next_stop to retrieve it</li>
<li><b>NEXUSRV_Trace_Event_Error:</b> Use nexusrv_trace_next_error to retrieve it</li>
</ul>
<p>Error handling: For all the hard errors listed below, decoding should be aborted, and the only thing the caller can do is to free the trace decoder by calling nexusrv_trace_decoder_fini.<br  />
Trace decoder returns error codes at different levels:</p><ul>
<li><b>-nexus_no_mem:</b> Failed to allocate memory. This is a <b>hard</b> error.</li>
<li><b>-nexus_stream_bad_mseo</b>, <b>-nexus_stream_truncate</b>, <b>-nexus_stream_read_failed:</b> Failed to fetch Message from trace file. It's reported by the Message decoder. This is a <b>hard</b> error.</li>
<li><b>-nexus_msg_invalid</b>, <b>-nexus_msg_missing_field:</b> Failed to decoder the Message from trace file. It's reported by the Message decoder. This is a <b>hard</b> error.</li>
<li><b>-nexus_msg_unsupported:</b> The Message is unsupported by the trace decoder. The caller can resolve the situation by handling Message itself. (via nexusrv_msg_decoder_next) Once the Message is consumed, it can retry the trace decoder function.</li>
<li><b>-nexus_trace_eof:</b> Expecting to decode more Messages, but there's no Message left. Decoding should be terminated. This is expected when the trace has been terminated, with or without a stop event.</li>
<li><b>-nexus_trace_not_synced:</b> Trace decoder hasn't been synced. The trace decoder must be synced once before calling try_retire and next_x(). The next_stop() and next_error() will also desync the decoder if returned success, and decoder should be synced again.</li>
<li><b>-nexus_trace_hist_overflow</b>, <b>-nexus_trace_icnt_overflow:</b> There are too many HIST or I-CNT ResourceFull Messages being consumed, and exceeds the capability of the trace decoder. This is a <b>hard</b> error</li>
<li><b>nexus_trace_mismatch:</b> This happens when the caller tries to get certain event (branch,sync...), but there's no such event pending. It typically means the caller is misusing the trace decoder. </li>
</ul>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="ada8ef96e9f39f946e2a9e144fc769e5c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada8ef96e9f39f946e2a9e144fc769e5c">&#9670;&nbsp;</a></span>nexusrv_trace_decoder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> <a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NexusRV Trace decoder context. </p>
<p>This should be initialized by nexusrv_trace_decoder_init before calling trace decoder functions, and finalized by nexusrv_trace_decoder_fini to release resources. </p>

</div>
</div>
<a id="aefb4fd68cba5529e582a9af3f4d0f8dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aefb4fd68cba5529e582a9af3f4d0f8dd">&#9670;&nbsp;</a></span>nexusrv_trace_indirect</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">typedef struct <a class="el" href="structnexusrv__trace__indirect.html">nexusrv_trace_indirect</a> <a class="el" href="structnexusrv__trace__indirect.html">nexusrv_trace_indirect</a></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>NexusRV Trace Indirect Branch Event. </p>
<p>If neither interrupt or exception is set, is a synchronous branch If both are set, it can be either but NexusRV Message doesn't report the exact type due to HW limitation </p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="abf2d47e275b0b04613cd92dc8bb62774"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf2d47e275b0b04613cd92dc8bb62774">&#9670;&nbsp;</a></span>nexusrv_trace_decoder_fini()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void nexusrv_trace_decoder_fini </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finialize the trace decoder. </p>
<p>Memory allocated by the trace decoder will be free'ed</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a15d1c90578e24316e8b5cea572c54801"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15d1c90578e24316e8b5cea572c54801">&#9670;&nbsp;</a></span>nexusrv_trace_decoder_init()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nexusrv_trace_decoder_init </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnexusrv__msg__decoder.html">nexusrv_msg_decoder</a> *&#160;</td>
          <td class="paramname"><em>msg_decoder</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the trace decoder. </p>
<p>The trace decoder will start using the Message decoder <code>msg_decoder</code> It'll not keep state of the Message decoder, so the Message decoder can still be invoked out of trace decoder context to handle non-standard Messages or custom Messages the trace decoder can't handle.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">msg_decoder</td><td>The Message decoder context </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">==0</td><td>Success </td></tr>
    <tr><td class="paramname">-nexus_no_mem</td><td>Out of memory </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="add5f97ac61a66e2a58dd401b23489b78"></a>
<h2 class="memtitle"><span class="permalink"><a href="#add5f97ac61a66e2a58dd401b23489b78">&#9670;&nbsp;</a></span>nexusrv_trace_next_error()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nexusrv_trace_next_error </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__error.html">nexusrv_trace_error</a> *&#160;</td>
          <td class="paramname"><em>error</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next Error event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">error</td><td>The consumed Error Event </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;0</td><td>Successfully got Error event </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Error occurred, refer to common errors section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="af4a7187c839bc77d28338d1c329334c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4a7187c839bc77d28338d1c329334c6">&#9670;&nbsp;</a></span>nexusrv_trace_next_indirect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nexusrv_trace_next_indirect </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__indirect.html">nexusrv_trace_indirect</a> *&#160;</td>
          <td class="paramname"><em>indirect</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next indirect branch. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">indirect</td><td>The consumed indirect branch </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;0</td><td>Successfully got Indirect branch </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Error occurred, refer to common errors section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ad88f183d8c8f6359b150bf6a2f31271f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad88f183d8c8f6359b150bf6a2f31271f">&#9670;&nbsp;</a></span>nexusrv_trace_next_stop()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nexusrv_trace_next_stop </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__stop.html">nexusrv_trace_stop</a> *&#160;</td>
          <td class="paramname"><em>stop</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next Stop event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">stop</td><td>The consumed Stop Event </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;0</td><td>Successfully got Stop event </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Error occurred, refer to common errors section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="afe49d5539add2735269dd787dc198a18"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe49d5539add2735269dd787dc198a18">&#9670;&nbsp;</a></span>nexusrv_trace_next_sync()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nexusrv_trace_next_sync </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__sync.html">nexusrv_trace_sync</a> *&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next Sync event. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sync</td><td>The consumed Sync Event </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;0</td><td>Successfully got Sync event </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Error occurred, refer to common errors section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a363e1ddacad3ec47ec9c3370369a3d77"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a363e1ddacad3ec47ec9c3370369a3d77">&#9670;&nbsp;</a></span>nexusrv_trace_next_tnt()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nexusrv_trace_next_tnt </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the next taken-not-taken. </p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">==0</td><td>Branch not taken </td></tr>
    <tr><td class="paramname">&gt;0</td><td>Branch taken </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Error occurred, refer to common errors section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a91ff25c95a5bd3f68185258d447e603c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a91ff25c95a5bd3f68185258d447e603c">&#9670;&nbsp;</a></span>nexusrv_trace_sync_reset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int nexusrv_trace_sync_reset </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__sync.html">nexusrv_trace_sync</a> *&#160;</td>
          <td class="paramname"><em>sync</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Synchronize the trace decoder. </p>
<p>If the decoder is already synchronized, do nothing. Else, forward till we get the next SYNC Message, and synchronize the trace decoder using it. The I-CNT and HIST will be cleared. The Address and Timestamp will be set to the Message. To not lose track of the reason of the SYNC Message, the caller should store the <code>sync</code> event when there is one.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">sync</td><td>The Sync event </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">==0</td><td>Trace decoder is already synchronized </td></tr>
    <tr><td class="paramname">&gt;0</td><td>Trace decoder is unsynced -&gt; synced. The <code>sync</code> is set to the synchronization event indicating the address and reason. </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Error occurred, refer to common errors section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a2320f87b2ee7bb0cbe9b34fa3df7c9ba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2320f87b2ee7bb0cbe9b34fa3df7c9ba">&#9670;&nbsp;</a></span>nexusrv_trace_try_retire()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int32_t nexusrv_trace_try_retire </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structnexusrv__trace__decoder.html">nexusrv_trace_decoder</a> *&#160;</td>
          <td class="paramname"><em>decoder</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>icnt</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Try to retire <code>icnt</code> from trace. </p>
<p>This is the main function the trace encoder provides. Usually it's intended to be used by the caller who has the knowledge of the context and the instructions to execute. The caller can try to retire <code>icnt</code> that represents the block of sequential instructions (without branch) and see if successful. The decoder will report the maximum I-CNT it can retire before it hits any event, and report the first in <code>event</code>. If there's no event less than the range of <code>icnt</code>, no event will be reported, and <code>icnt</code> will be returned. To avoid overflow, <code>icnt</code> will be capped at INT32_MAX <br  />
 For the caller that has no knowledge of context or instructions, it can try to retire INT32_MAX I-CNT, and check the actual I-CNT retired. <br  />
 Breakdown of events reported: <br  />
 NEXUSRV_Trace_Event_None: None or potentially a TNT (in HTM mode). <br  />
 NEXUSRV_Trace_Event_Direct: Direct branch, use nexusrv_trace_next_tnt to retrieve <br  />
 NEXUSRV_Trace_Event_Trap, NEXUSRV_Trace_Event_Indirect: Indirect branch, use nexusrv_trace_next_indirect to retrieve <br  />
 NEXUSRV_Trace_Event_Sync: Sync event, use nexusrv_trace_next_sync to retrieve <br  />
 NEXUSRV_Trace_Event_Stop: Stop event, use nexusrv_trace_next_stop to retrieve <br  />
 NEXUSRV_Trace_Event_Error: Error event, use nexusrv_trace_next_error to retrieve <br  />
 </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">decoder</td><td>The decoder context </td></tr>
    <tr><td class="paramdir"></td><td class="paramname">icnt</td><td>I-CNT intended to retire </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">event</td><td>Encountered event to report </td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>Return values</dt><dd>
  <table class="retval">
    <tr><td class="paramname">&gt;=0</td><td>No error occurred, and the actual I-CNT retired </td></tr>
    <tr><td class="paramname">&lt;0</td><td>Error occurred, refer to common errors section </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
